<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Petko's Coding Blog - Python</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Petko's Coding Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/aws.html">AWS</a></li>
                    <li><a href="/category/django.html">Django</a></li>
                    <li><a href="/category/python.html">Python</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/using-mustache-templates-with-django.html">Using mustache templates with Django.</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-05-23T22:13:00-07:00">
                Published: Mon 23 May 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/petko-minkov.html">Petko Minkov</a>
        </address>
<p>In <a href="/category/django.html">Django</a>.</p>
<p>Tags: <a href="/tag/python.html">Python</a> <a href="/tag/django.html">Django</a> </p>
</footer><!-- /.post-info --><p>There are various reasons why you might want to use client side templates in a Django app. 
For example, you might want to make your initial page load faster, return some of your data in json format and postpone some template rendering until the user needs it.</p>
<p>Let's see how we can easily include <a href="https://mustache.github.io/">mustache</a> templates in Django. <a href="http://mustache.github.io/mustache.5.html">This</a> page explains the mustache syntax quite well.</p>
<p>The most optimized way to include a client side template in your code would be to compile it on deployment and include the compiled JavaScript file as part of your static files.
However, that seemed like too much work and I wanted something that I can implement faster.</p>
<p>If you're not shipping compiled JavaScript, then your other option would be to have the template text somewhere and compile it client side. I have one main requirement though - I don't want my template code to be in a string which editors will display without HTML syntax highlighting.</p>
<p>So, working with these constraints, let's see what we can come up with.</p>
<p>First, let's say our template code is in <code>person.html</code> and it looks like this:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  {{#person}}
    The user&#39;s name is {{name}}.
  {{/person}}
  {{^person}}
    There&#39;s no user defined.
  {{/person}}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>


<p>Now, we can include this template in the html page returned by our initial page load, like this:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">person_template_text</span> <span class="o">=</span> <span class="sb">`{% include &quot;myapp/templates/person.html&quot; %}`</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>


<p>In this case, <code>person_template_text</code> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literal</a>. Template literals are JavaScript strings that can span multiple lines.</p>
<p>Now, we just need to compile the template so that it's ready to be rendered. We'll use <a href="http://twitter.github.io/hogan.js/">hogan.js</a>, since it's advertised as faster and smaller than mustache and it fully supports mustache syntax. Let's say we're also using jQuery. We can do something along these lines:</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">person_template</span> <span class="o">=</span> <span class="nx">Hogan</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">person_template_text</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderPerson</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">personDict</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">person_template</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">personDict</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">app</span><span class="p">;</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>


<p>And that's it. There are many other ways to do this, which will be more optimized, but this one seems like an easy one to start with.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-much-does-it-cost-to-run-a-django-app-on-aws-using-elastic-beanstalk.html" rel="bookmark"
                           title="Permalink to How much does it cost to run a Django app on AWS using Elastic Beanstalk?">How much does it cost to run a Django app on AWS using Elastic Beanstalk?</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-04-20T13:56:00-07:00">
                Published: Wed 20 April 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/petko-minkov.html">Petko Minkov</a>
        </address>
<p>In <a href="/category/aws.html">AWS</a>.</p>
<p>Tags: <a href="/tag/aws.html">AWS</a> <a href="/tag/elastic-beanstalk.html">Elastic Beanstalk</a> <a href="/tag/python.html">Python</a> <a href="/tag/django.html">Django</a> </p>
</footer><!-- /.post-info -->                <p>I've been running a Django app on <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-django.html">Elastic Beanstalk</a> for a couple of months and I have a decent idea now of the costs involved and the pros and cons of this approach. My goal was to get something going as soon as possible and I'd say Elastic ...</p>
                <a class="readmore" href="/how-much-does-it-cost-to-run-a-django-app-on-aws-using-elastic-beanstalk.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-to-generate-user-activation-links-in-django.html" rel="bookmark"
                           title="Permalink to How to generate user activation links in Django">How to generate user activation links in Django</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-04-05T17:03:00-07:00">
                Published: Tue 05 April 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/petko-minkov.html">Petko Minkov</a>
        </address>
<p>In <a href="/category/python.html">Python</a>.</p>
<p>Tags: <a href="/tag/python.html">Python</a> <a href="/tag/django.html">Django</a> <a href="/tag/security.html">Security</a> <a href="/tag/cryptography.html">Cryptography</a> </p>
</footer><!-- /.post-info -->                <p>Imagine the following simple user registration flow:</p>
<ol>
<li>User registers by setting an e-mail and a password.</li>
<li>The server sends an e-mail containing an activation link to the user.</li>
<li>The user clicks on the activation link and activates their account.</li>
</ol>
<p>Let's focus on step 2. How do we generate this ...</p>
                <a class="readmore" href="/how-to-generate-user-activation-links-in-django.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-243631-7', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>